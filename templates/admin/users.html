{% extends "base.html" %}
{% block title %}Users • Admin • College Gallery{% endblock %}
{% block content %}
<h2>Manage Users</h2>
<table class="table table-striped align-middle">
  <thead><tr><th>#</th><th>Name</th><th>Email</th><th>Role</th><th>Joined</th><th>Action</th></tr></thead>
  <tbody>
    {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.full_name }}</td>
        <td>{{ u.email }}</td>
        <td><span class="badge bg-secondary">{{ u.role }}</span></td>
        <td class="small text-muted">{{ u.created_at.strftime('%d %b %Y') }}</td>
        <td>
          <form class="d-flex gap-2" method="post" action="{{ url_for('admin_set_role', user_id=u.id) }}">
            <select class="form-select form-select-sm w-auto" name="role">
              <option value="student" {% if u.role=='student' %}selected{% endif %}>student</option>
              <option value="editor" {% if u.role=='editor' %}selected{% endif %}>editor</option>
              <option value="admin" {% if u.role=='admin' %}selected{% endif %}>admin</option>
            </select>
            <button class="btn btn-sm btn-primary">Update</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
